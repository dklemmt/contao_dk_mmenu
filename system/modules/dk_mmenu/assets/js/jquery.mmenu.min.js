/*	
 *	jQuery mmenu 1.4.0
 *	
 *	Copyright (c) 2013 Fred Heusschen
 *	www.frebsite.nl
 *
 *	Dual licensed under the MIT and GPL licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 */


(function(a){function j(b){return"string"==typeof b?("left"==b||"right"==b)&&(b={position:b}):"object"!=typeof b&&(b={}),b.addCounters!==void 0&&(a.fn.mmenu.deprecated("addCounters-option","counters.add-option"),b.counters={add:b.addCounters}),b.closeOnClick!==void 0&&(a.fn.mmenu.deprecated("closeOnClick-option","onClick.close-option"),b.onClick={close:b.closeOnClick}),"boolean"==typeof b.counters?b.counters={add:b.counters,count:b.counters}:"object"!=typeof b.counters&&(b.counters={}),"boolean"==typeof b.onClick?b.onClick={close:b.onClick}:"object"!=typeof b.onClick&&(b.onClick={}),"boolean"==typeof b.searchfield?b.searchfield={add:b.searchfield,search:b.searchfield}:"string"==typeof b.searchfield?b.searchfield={add:!0,search:!0,placeholder:b.searchfield}:"object"!=typeof b.searchfield&&(b.searchfield={}),b}function k(a){return"boolean"==typeof a.onClick.delayPageload&&(a.onClick.delayPageload=a.onClick.delayPageload?a.configuration.slideDuration:0),a}function l(b,c){return b||(b=a("> "+c.pageNodetype,d),b.length>1&&(b=b.wrapAll("<"+c.pageNodetype+" />").parent()),b.addClass(z("page"))),b}function m(b,c,d){return b.is(d.menuNodetype)||(b=a("<"+d.menuNodetype+" />").append(b)),b.prependTo("body").addClass(z("").slice(0,-1)).addClass(z(c)),a("li."+d.selectedClass,b).removeClass(d.selectedClass).addClass(z("selected")),a("li."+d.labelClass,b).removeClass(d.labelClass).addClass(z("label")),b}function n(b,c,d){b.addClass(z(c)),a("ul ul",b).addClass(z("submenu")).each(function(b){var e=a(this);$a=e.parent().find("> a, > span"),h=e.attr("id")||z("s"+d+"-"+b),e.attr("id",h);var f=a('<a class="'+z("subopen")+'" href="#'+h+'" />').insertBefore($a);if($a.is("a")||f.addClass(z("fullsubopen")),"horizontal"==c){var g=e.parent().parent(),h=g.attr("id")||z("p"+d+"-"+b);g.attr("id",h),e.prepend('<li class="'+z("subtitle")+'"><a class="'+z("subclose")+'" href="#'+h+'">'+$a.text()+"</a></li>")}}),"horizontal"==c?(a("li."+z("selected"),b).parents("li."+z("selected")).removeClass(z("selected")).end().each(function(){var b=a(this),c=b.find("> ul");c.length&&(b.parent().addClass(z("subopened")),c.addClass(z("opened")))}).parent().addClass(z("opened")).parents("ul").addClass(z("subopened")),a("ul."+z("opened"),b).length||a("ul",b).not("."+z("submenu")).addClass(z("opened")),a("ul ul",b).appendTo(b)):a("li."+z("selected"),b).addClass(z("opened")).parents("."+z("selected")).removeClass(z("selected"))}function o(b,c){return b||(b=a('<div id="'+z("blocker")+'" />').appendTo(d)),y(b,function(){c.trigger(B("close"))},!0),b}function p(b,d){if(d.close){var f=a("a",b).not("."+z("subopen")).not("."+z("subclose"));y(f,function(){var e=a(this),g=e.attr("href");b.trigger(B("close")),f.parent().removeClass(z("selected")),e.parent().addClass(z("selected")),d.blockUI&&"#"!=g.slice(0,1)&&c.addClass(z("blocking")),"#"!=g&&setTimeout(function(){window.location.href=g},d.delayPageload)})}}function q(b,c,d){a("em."+d.counterClass,b).removeClass(d.counterClass).addClass(z("counter")),c.add&&a("."+z("submenu"),b).each(function(){var c=a(this),d=c.attr("id");if(d&&d.length){var e=a('<em class="'+z("counter")+'" />'),f=a("a."+z("subopen"),b).filter('[href="#'+d+'"]');f.parent().find("em."+z("counter")).length||f.before(e)}}),c.count&&a("em."+z("counter"),b).each(function(){var c=a(this),d=a("ul"+c.next().attr("href"),b);c.bind(B("count"),function(a){a.preventDefault(),a.stopPropagation();var b=d.children().not("."+z("label")).not("."+z("subtitle")).not("."+z("noresult")).not("."+z("noresults"));c.html(b.length)})}).trigger(B("count"))}function r(b,c){if(c.add){var d=a('<div class="'+z("search")+'" />').prependTo(b);d.append('<input placeholder="'+c.placeholder+'" type="text" autocomplete="off" />'),c.noResults&&a("ul",b).not("."+z("submenu")).append('<li class="'+z("noresults")+'">'+c.noResults+"</li>")}if(c.search){var d=a("div."+z("search"),b),e=a("input",d),f=a("li."+z("label"),b),g=a("em."+z("counter"),b),h=a("li",b).not("."+z("subtitle")).not("."+z("label")).not("."+z("noresults")),i="> a";c.showLinksOnly||(i+=", > span"),e.bind(B("keyup"),function(){var c=e.val().toLowerCase();h.add(f).addClass(z("noresult")),h.each(function(){var b=a(this);a(i,b).text().toLowerCase().indexOf(c)>-1&&b.add(b.prevAll("."+z("label")).first()).removeClass(z("noresult"))}),a(a("ul."+z("submenu"),b).get().reverse()).each(function(){var c=a(this),d=null,e=c.attr("id"),f=c.find("li").not("."+z("subtitle")).not("."+z("label")).not("."+z("noresult"));if(e&&e.length)var d=a("a."+z("subopen"),b).filter('[href="#'+e+'"]').parent();f.length?d&&(d.removeClass(z("noresult")),d.removeClass(z("nosubresult"))):(c.trigger(B("close")),d&&d.addClass(z("nosubresult")))}),b[h.not("."+z("noresult")).length?"removeClass":"addClass"](z("noresults")),g.trigger(B("count"))})}}function s(b,c){var d=b.attr("id");d&&d.length&&y('a[href="#'+d+'"]',function(){b.trigger(B("toggle"))});var d=c.attr("id");d&&d.length&&y('a[href="#'+d+'"]',function(){b.trigger(B("close"))}),y(a("a."+z("subopen")+", "+"a."+z("subclose"),b),function(){a(a(this).attr("href")).trigger(B("toggle"))})}function t(a,f){var h=x();g.not(a).trigger(B("close"));var i=0;return b.bind(B("resize"),function(){var c=b.width();c!=i&&(i=c,e.css("min-height",h+d.height()).css("top",-h).width(c))}),e.data(A("style"),e.attr("style")||"").data(A("scrollTop"),h).css("top",-h).width(e.outerWidth()),a.addClass(z("opened")),c.addClass(z("opened")).addClass(z(f)),setTimeout(function(){c.addClass(z("opening"))},100),"open"}function u(a,d){return c.removeClass(z("opening")),setTimeout(function(){c.removeClass(z("opened")).removeClass(z(d.position)),a.removeClass(z("opened")),e.attr("style",e.data(A("style"))),b.unbind(B("resize")),h&&h.scrollTop(e.data(A("scrollTop")))},d.configuration.slideDuration+100),"close"}function v(a,b){return a.prevAll("ul").addClass(z("subopened")),a.nextAll("ul").removeClass(z("subopened")),a.removeClass(z("subopened")).addClass(z("opened")),setTimeout(function(){a.nextAll("ul").removeClass(z("opened"))},b.configuration.slideDuration+25),"open"}function w(a){return a.prevAll("ul."+z("opened")).first().trigger(B("open")),"close"}function x(){return h||(0!=a("html").scrollTop()?h=a("html"):0!=a("body").scrollTop()&&(h=a("body"))),h?h.scrollTop()-1:0}function y(b,c,d){"string"==typeof b&&(b=a(b));var e=d?"ontouchstart"in document?B("touchstart"):B("mousedown"):B("click");b.bind(e,function(a){a.preventDefault(),a.stopPropagation(),c.call(this,a)})}function z(a){return"mmenu-"+a}function A(a){return"mmenu-"+a}function B(a){return a+".mmenu"}var b=null,c=null,d=null,e=null,f=null,g=a(),h=null,i=0;a.fn.mmenu=function(h){return b||(b=a(window),c=a("html"),d=a("body")),h=j(h),h=a.extend(!0,{},a.fn.mmenu.defaultOptions,h),h=k(h),c[h.configuration.hardwareAcceleration?"addClass":"removeClass"](z("accelerated")),this.each(function(){var b=a(this),c=!1,d=h.slidingSubmenus?"horizontal":"vertical";g=g.add(b),i++,e=l(e,h.configuration),f=o(f,b,h.configuration),b=m(b,h.position,h.configuration),n(b,d,i),p(b,h.onClick,h.configuration),q(b,h.counters,h.configuration),r(b,h.searchfield),s(b,e);var j=b.find("ul");b.add(j).bind(B("toggle")+" "+B("open")+" "+B("close"),function(a){a.preventDefault(),a.stopPropagation()}),b.bind(B("toggle"),function(){return b.triggerHandler(B(c?"close":"open"))}).bind(B("open"),function(){return c?!1:(c=!0,t(b,h.position))}).bind(B("close"),function(){return c?(c=!1,u(b,h)):!1}),"horizontal"==d?j.bind(B("toggle"),function(){return a(this).triggerHandler(B("open"))}).bind(B("open"),function(){return v(a(this),h)}).bind(B("close"),function(){return w(a(this),h)}):j.bind(B("toggle"),function(){var c=a(this);return c.triggerHandler(B(c.parent().hasClass(z("opened"))?"close":"open"))}).bind(B("open"),function(){return a(this).parent().addClass(z("opened")),"open"}).bind(B("close"),function(){return a(this).parent().removeClass(z("opened")),"close"})})},a.fn.mmenu.defaultOptions={position:"left",slidingSubmenus:!0,counters:{add:!1,count:!0},searchfield:{add:!1,search:!0,showLinksOnly:!0,placeholder:"Search",noResults:"No results found."},onClick:{close:!0,delayPageload:!0,blockUI:!1},configuration:{hardwareAcceleration:!0,selectedClass:"Selected",labelClass:"Label",counterClass:"Counter",pageNodetype:"div",menuNodetype:"nav",slideDuration:500}},a.fn.mmenu.debug=function(a){"undefined"!=typeof console&&console.log!==void 0&&console.log("MMENU: "+a)},a.fn.mmenu.deprecated=function(a,b){"undefined"!=typeof console&&console.warn!==void 0&&console.warn("MMENU: "+a+" is deprecated, use "+b+" instead.")}})(jQuery);